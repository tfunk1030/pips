{
  "file_path": "src/app/components/ui/ConfidenceIndicator.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import React, { useEffect, useRef } from 'react';\nimport { View, Text, Animated, StyleSheet, ViewStyle } from 'react-native';\n\ninterface Props {\n  /** Confidence value from 0 to 1 */\n  confidence: number;\n  /** Compact mode for inline display */\n  compact?: boolean;\n  /** Additional container styles */\n  style?: ViewStyle;\n}\n\n/**\n * Visual indicator showing confidence as a percentage with color-coded severity.\n *\n * Color coding:\n * - Green (>80%): High confidence\n * - Yellow (60-80%): Medium confidence\n * - Red (<60%): Low confidence\n */\nexport default function ConfidenceIndicator({ confidence, compact = false, style }: Props) {\n  const animatedValue = useRef(new Animated.Value(confidence)).current;\n\n  useEffect(() => {\n    Animated.timing(animatedValue, {\n      toValue: confidence,\n      duration: 300,\n      useNativeDriver: false,\n    }).start();\n  }, [confidence, animatedValue]);\n\n  const percentage = Math.round(confidence * 100);\n  const color = getConfidenceColor(confidence);\n  const label = getConfidenceLabel(confidence);\n\n  // Animated background color interpolation\n  const backgroundColor = animatedValue.interpolate({\n    inputRange: [0, 0.6, 0.8, 1],\n    outputRange: ['rgba(220, 38, 38, 0.15)', 'rgba(220, 38, 38, 0.15)', 'rgba(234, 179, 8, 0.15)', 'rgba(34, 197, 94, 0.15)'],\n  });\n\n  // Animated width for the progress bar fill\n  const fillWidth = animatedValue.interpolate({\n    inputRange: [0, 1],\n    outputRange: ['0%', '100%'],\n  });\n\n  if (compact) {\n    return (\n      <View style={[styles.compactContainer, style]}>\n        <View style={[styles.compactDot, { backgroundColor: color }]} />\n        <Text style={[styles.compactText, { color }]}>{percentage}%</Text>\n      </View>\n    );\n  }\n\n  return (\n    <Animated.View style={[styles.container, { backgroundColor }, style]}>\n      <View style={styles.header}>\n        <Text style={styles.label}>Confidence</Text>\n        <Text style={[styles.percentage, { color }]}>{percentage}%</Text>\n      </View>\n      <View style={styles.progressBar}>\n        <Animated.View\n          style={[\n            styles.progressFill,\n            {\n              width: fillWidth,\n              backgroundColor: color,\n            },\n          ]}\n        />\n      </View>\n      <Text style={[styles.statusLabel, { color }]}>{label}</Text>\n    </Animated.View>\n  );\n}\n\n/**\n * Get color based on confidence level.\n * Green (>80%), Yellow (60-80%), Red (<60%)\n */\nfunction getConfidenceColor(confidence: number): string {\n  if (confidence >= 0.8) {\n    return '#22c55e'; // Green\n  } else if (confidence >= 0.6) {\n    return '#eab308'; // Yellow\n  } else {\n    return '#dc2626'; // Red\n  }\n}\n\n/**\n * Get human-readable label for confidence level.\n */\nfunction getConfidenceLabel(confidence: number): string {\n  if (confidence >= 0.8) {\n    return 'High Confidence';\n  } else if (confidence >= 0.6) {\n    return 'Medium Confidence';\n  } else {\n    return 'Low Confidence';\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 12,\n    borderRadius: 8,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  label: {\n    color: '#9aa5ce',\n    fontSize: 14,\n  },\n  percentage: {\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  progressBar: {\n    height: 8,\n    backgroundColor: 'rgba(255, 255, 255, 0.1)',\n    borderRadius: 4,\n    overflow: 'hidden',\n    marginBottom: 8,\n  },\n  progressFill: {\n    height: '100%',\n    borderRadius: 4,\n  },\n  statusLabel: {\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  compactContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  compactDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    marginRight: 4,\n  },\n  compactText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n});\n",
        "last_modified": "2025-12-22T03:10:02.205516"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:09:59.517474",
  "last_updated": "2025-12-22T03:09:59.610611"
}