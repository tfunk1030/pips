{
  "file_path": "src/extraction/types.ts",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "/**\n * Extraction pipeline types for board image processing and confidence tracking.\n */\n\n/**\n * Stages in the extraction pipeline, executed in order.\n */\nexport type ExtractionStage =\n  | 'BOARD_DETECTION'\n  | 'GRID_ALIGNMENT'\n  | 'CELL_EXTRACTION'\n  | 'PIP_RECOGNITION';\n\n/**\n * Severity levels for confidence hints.\n */\nexport type HintSeverity = 'low' | 'medium' | 'high';\n\n/**\n * Confidence score for a single extraction stage.\n */\nexport interface StageConfidence {\n  stage: ExtractionStage;\n  /** Confidence score from 0 to 1 */\n  confidence: number;\n  /** Method used for this stage (e.g., 'edge_detection', 'template_matching') */\n  method: string;\n  /** Optional additional details about the confidence calculation */\n  details?: Record<string, unknown>;\n}\n\n/**\n * Human-readable hint about confidence issues at a specific stage.\n */\nexport interface ConfidenceHint {\n  stage: ExtractionStage;\n  severity: HintSeverity;\n  /** User-facing message describing the issue (e.g., 'Low confidence in Grid dimensions') */\n  message: string;\n  /** Actionable suggestion to improve extraction (e.g., 'Try capturing with better lighting') */\n  suggestion: string;\n}\n\n/**\n * Cell value extracted from the puzzle grid.\n */\nexport interface ExtractedCell {\n  row: number;\n  col: number;\n  /** Pip value (0-6 typically, or null if uncertain) */\n  value: number | null;\n  /** Confidence in this specific cell's extraction */\n  confidence: number;\n}\n\n/**\n * Complete result of the extraction pipeline.\n */\nexport interface ExtractionResult {\n  /** Whether extraction completed successfully */\n  success: boolean;\n  /** Grid dimensions */\n  rows: number;\n  cols: number;\n  /** Extracted cell values */\n  cells: ExtractedCell[];\n  /** Confidence scores for each pipeline stage */\n  stageConfidences: StageConfidence[];\n  /** Human-readable hints about confidence issues */\n  hints: ConfidenceHint[];\n  /** Overall extraction confidence (0-1, weighted average of stage confidences) */\n  overallConfidence: number;\n  /** Processing time in milliseconds */\n  processingTimeMs: number;\n  /** Error message if extraction failed */\n  error?: string;\n}\n",
        "last_modified": "2025-12-22T03:10:02.241960"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:10:00.460129",
  "last_updated": "2025-12-22T03:10:00.570391"
}