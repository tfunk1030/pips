{
  "file_path": "src/model/normalize.ts",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import { PuzzleSpec } from './types';\n\nexport interface NormalizedPuzzle extends PuzzleSpec {\n  adjacency: [number, number][][][]; // adjacency[r][c] -> list of [r,c]\n  regionCells: Record<number, [number, number][]>;\n}\n\nexport function normalizePuzzle(puzzle: PuzzleSpec): NormalizedPuzzle {\n  const adjacency: [number, number][][][] = [];\n  const regionCells: Record<number, [number, number][]> = {};\n  for (let r = 0; r < puzzle.rows; r++) {\n    adjacency[r] = [];\n    for (let c = 0; c < puzzle.cols; c++) {\n      const cellRegion = puzzle.regions[r][c];\n      if (!regionCells[cellRegion]) regionCells[cellRegion] = [];\n      regionCells[cellRegion].push([r, c]);\n      const neighbors: [number, number][] = [];\n      if (r > 0) neighbors.push([r - 1, c]);\n      if (r < puzzle.rows - 1) neighbors.push([r + 1, c]);\n      if (c > 0) neighbors.push([r, c - 1]);\n      if (c < puzzle.cols - 1) neighbors.push([r, c + 1]);\n      adjacency[r][c] = neighbors;\n    }\n  }\n  return { ...puzzle, adjacency, regionCells };\n}\n",
        "last_modified": "2025-12-22T03:10:02.245768"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:10:00.573391",
  "last_updated": "2025-12-22T03:10:00.668579"
}