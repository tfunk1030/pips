{
  "file_path": "src/app/screens/PuzzleViewerScreen.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, ScrollView } from 'react-native';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/RootNavigator';\nimport PuzzleGrid from '../components/PuzzleGrid';\n\nimport { validateSpec } from '../../validator/validateSpec';\n\nimport { PuzzleSpec } from '../../model/types';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'Viewer'>;\n\nexport default function PuzzleViewerScreen({ navigation, route }: Props) {\n  const { puzzle, sourceText } = route.params;\n  const specReport = validateSpec(puzzle);\n\n  const renderSpecIssues = () =>\n    specReport.issues.map((issue, idx) => (\n      <Text key={idx} style={{ color: issue.level === 'error' ? '#f78c6c' : '#9aa5ce' }}>\n        \u2022 {issue.message}\n      </Text>\n    ));\n\n  return (\n    <ScrollView style={styles.container} contentContainerStyle={{ paddingBottom: 24 }}>\n      <Text style={styles.header}>{puzzle.name ?? 'Puzzle'}</Text>\n      <PuzzleGrid puzzle={puzzle} />\n      <Text style={styles.section}>Spec validation</Text>\n      {renderSpecIssues()}\n      <View style={styles.buttonRow}>\n        <TouchableOpacity style={styles.secondary} onPress={() => navigation.navigate('Editor', { initialText: sourceText })}>\n          <Text style={styles.secondaryText}>Edit</Text>\n        </TouchableOpacity>\n        <TouchableOpacity style={styles.primary} onPress={() => navigation.navigate('Solve', { puzzle, sourceText })}>\n          <Text style={styles.primaryText}>Solve</Text>\n        </TouchableOpacity>\n      </View>\n      <Text style={styles.section}>YAML</Text>\n      <Text selectable style={styles.code}>\n        {sourceText}\n      </Text>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: '#0c1021', padding: 16 },\n  header: { color: '#fff', fontSize: 22, marginBottom: 12 },\n  section: { color: '#9aa5ce', marginTop: 16, marginBottom: 4 },\n  buttonRow: { flexDirection: 'row', marginTop: 12 },\n  primary: { backgroundColor: '#4a60c4', padding: 12, borderRadius: 8, flex: 1, marginLeft: 8 },\n  primaryText: { color: '#fff', textAlign: 'center', fontWeight: 'bold' },\n  secondary: { borderWidth: 1, borderColor: '#4a60c4', padding: 12, borderRadius: 8, flex: 1, marginRight: 8 },\n  secondaryText: { color: '#4a60c4', textAlign: 'center', fontWeight: 'bold' },\n  code: { backgroundColor: '#11162a', color: '#e6e6e6', padding: 12, borderRadius: 8, fontFamily: 'monospace' },\n});\n",
        "last_modified": "2025-12-22T03:10:02.222541"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:09:59.938917",
  "last_updated": "2025-12-22T03:10:00.044211"
}