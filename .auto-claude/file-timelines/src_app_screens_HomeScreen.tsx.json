{
  "file_path": "src/app/screens/HomeScreen.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import React, { useEffect, useState } from 'react';\nimport { View, Text, FlatList, TouchableOpacity, StyleSheet } from 'react-native';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/RootNavigator';\nimport { loadPuzzles, savePuzzle } from '../../storage/puzzles';\nimport { parsePuzzle } from '../../model/parser';\nimport sampleText from '../../samples/sample1.yaml?raw';\n\n// @ts-ignore bundler raw import fallback\nconst sampleYaml = typeof sampleText === 'string' ? sampleText : '';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'Home'>;\n\ninterface PuzzleEntry {\n  id: string;\n  name: string;\n  text: string;\n}\n\nexport default function HomeScreen({ navigation }: Props) {\n  const [library, setLibrary] = useState<PuzzleEntry[]>([]);\n\n  useEffect(() => {\n    loadPuzzles().then(setLibrary);\n  }, []);\n\n  const handleLoadSample = async () => {\n    const { puzzle } = parsePuzzle(sampleYaml);\n    const entry: PuzzleEntry = { id: `sample-${Date.now()}`, name: puzzle.name ?? 'Sample', text: sampleYaml };\n    await savePuzzle(entry);\n    const updated = await loadPuzzles();\n    setLibrary(updated);\n    navigation.navigate('Viewer', { puzzle, sourceText: sampleYaml });\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.header}>Pips Library</Text>\n      <Text style={styles.sub}>Saved puzzles stay on device for offline solving.</Text>\n      <TouchableOpacity style={styles.primary} onPress={() => navigation.navigate('Editor')}>\n        <Text style={styles.primaryText}>Import YAML</Text>\n      </TouchableOpacity>\n      <TouchableOpacity style={styles.secondary} onPress={handleLoadSample}>\n        <Text style={styles.secondaryText}>Load Example Puzzle</Text>\n      </TouchableOpacity>\n      <FlatList\n        data={library}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={{ paddingVertical: 8 }}\n        renderItem={({ item }) => (\n          <TouchableOpacity\n            style={styles.card}\n            onPress={() => {\n              const { puzzle } = parsePuzzle(item.text);\n              navigation.navigate('Viewer', { puzzle, sourceText: item.text });\n            }}\n          >\n            <Text style={styles.cardTitle}>{item.name}</Text>\n            <Text style={styles.cardMeta}>{item.text.split('\\n')[0]}</Text>\n          </TouchableOpacity>\n        )}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: '#0c1021', padding: 16 },\n  header: { fontSize: 24, fontWeight: 'bold', color: '#fff', marginBottom: 4 },\n  sub: { color: '#9aa5ce', marginBottom: 12 },\n  primary: { backgroundColor: '#4a60c4', padding: 12, borderRadius: 8, marginBottom: 8 },\n  primaryText: { color: '#fff', textAlign: 'center', fontWeight: 'bold' },\n  secondary: { borderWidth: 1, borderColor: '#4a60c4', padding: 12, borderRadius: 8, marginBottom: 16 },\n  secondaryText: { color: '#4a60c4', textAlign: 'center', fontWeight: 'bold' },\n  card: { backgroundColor: '#141a32', padding: 12, borderRadius: 8, marginBottom: 8 },\n  cardTitle: { color: '#fff', fontSize: 16, marginBottom: 4 },\n  cardMeta: { color: '#9aa5ce', fontSize: 12 },\n});\n",
        "last_modified": "2025-12-22T03:10:02.212516"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:09:59.734257",
  "last_updated": "2025-12-22T03:09:59.829835"
}