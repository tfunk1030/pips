{
  "file_path": "src/extraction/mockData.ts",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "/**\n * Mock extraction results for development and testing.\n * Provides sample data with various confidence levels to test UI components.\n */\n\nimport {\n  ExtractionStage,\n  StageConfidence,\n  ExtractedCell,\n  ExtractionResult,\n} from './types';\nimport { generateConfidenceHints, calculateOverallConfidence } from './pipeline';\n\n/**\n * Generate a simple grid of extracted cells for testing.\n */\nfunction generateMockCells(rows: number, cols: number, baseConfidence: number): ExtractedCell[] {\n  const cells: ExtractedCell[] = [];\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < cols; col++) {\n      cells.push({\n        row,\n        col,\n        value: Math.floor(Math.random() * 7), // Random pip value 0-6\n        confidence: baseConfidence + (Math.random() * 0.1 - 0.05), // Small variance around base\n      });\n    }\n  }\n  return cells;\n}\n\n/**\n * Create a complete ExtractionResult from stage confidences.\n */\nfunction createExtractionResult(\n  stageConfidences: StageConfidence[],\n  rows: number = 5,\n  cols: number = 5,\n): ExtractionResult {\n  const overallConfidence = calculateOverallConfidence(stageConfidences);\n  const hints = generateConfidenceHints(stageConfidences);\n\n  return {\n    success: true,\n    rows,\n    cols,\n    cells: generateMockCells(rows, cols, overallConfidence),\n    stageConfidences,\n    hints,\n    overallConfidence,\n    processingTimeMs: Math.floor(Math.random() * 500) + 200,\n  };\n}\n\n/**\n * High confidence scenario - all stages > 0.9\n * Expected: No hints generated, high overall confidence\n */\nexport const highConfidenceResult: ExtractionResult = createExtractionResult([\n  {\n    stage: 'BOARD_DETECTION',\n    confidence: 0.95,\n    method: 'edge_detection',\n    details: { edgeCount: 4, cornerDetection: 'strong' },\n  },\n  {\n    stage: 'GRID_ALIGNMENT',\n    confidence: 0.92,\n    method: 'hough_transform',\n    details: { linesDetected: 12, gridFit: 'excellent' },\n  },\n  {\n    stage: 'CELL_EXTRACTION',\n    confidence: 0.94,\n    method: 'contour_detection',\n    details: { cellsFound: 25, uniformSize: true },\n  },\n  {\n    stage: 'PIP_RECOGNITION',\n    confidence: 0.91,\n    method: 'template_matching',\n    details: { templatesMatched: 25, avgMatchScore: 0.91 },\n  },\n]);\n\n/**\n * Low single-stage confidence scenario - one stage performs poorly\n * Expected: Single hint for the low-confidence stage\n */\nexport const lowSingleStageResult: ExtractionResult = createExtractionResult([\n  {\n    stage: 'BOARD_DETECTION',\n    confidence: 0.88,\n    method: 'edge_detection',\n    details: { edgeCount: 4, cornerDetection: 'good' },\n  },\n  {\n    stage: 'GRID_ALIGNMENT',\n    confidence: 0.55,\n    method: 'hough_transform',\n    details: { linesDetected: 8, gridFit: 'poor', note: 'Perspective distortion detected' },\n  },\n  {\n    stage: 'CELL_EXTRACTION',\n    confidence: 0.82,\n    method: 'contour_detection',\n    details: { cellsFound: 25, uniformSize: false },\n  },\n  {\n    stage: 'PIP_RECOGNITION',\n    confidence: 0.79,\n    method: 'template_matching',\n    details: { templatesMatched: 22, avgMatchScore: 0.79 },\n  },\n]);\n\n/**\n * High variance across stages scenario - significant difference between best and worst\n * Expected: Variance warning plus individual stage warnings\n */\nexport const highVarianceResult: ExtractionResult = createExtractionResult([\n  {\n    stage: 'BOARD_DETECTION',\n    confidence: 0.98,\n    method: 'edge_detection',\n    details: { edgeCount: 4, cornerDetection: 'excellent' },\n  },\n  {\n    stage: 'GRID_ALIGNMENT',\n    confidence: 0.95,\n    method: 'hough_transform',\n    details: { linesDetected: 12, gridFit: 'excellent' },\n  },\n  {\n    stage: 'CELL_EXTRACTION',\n    confidence: 0.45,\n    method: 'contour_detection',\n    details: { cellsFound: 20, uniformSize: false, note: 'Shadow interference' },\n  },\n  {\n    stage: 'PIP_RECOGNITION',\n    confidence: 0.52,\n    method: 'template_matching',\n    details: { templatesMatched: 15, avgMatchScore: 0.52, note: 'Worn pip markings' },\n  },\n]);\n\n/**\n * Mixed scenario - multiple issues across different stages\n * Expected: Multiple hints for various low-confidence stages\n */\nexport const mixedIssuesResult: ExtractionResult = createExtractionResult([\n  {\n    stage: 'BOARD_DETECTION',\n    confidence: 0.65,\n    method: 'edge_detection',\n    details: { edgeCount: 3, cornerDetection: 'partial', note: 'Board partially obscured' },\n  },\n  {\n    stage: 'GRID_ALIGNMENT',\n    confidence: 0.58,\n    method: 'hough_transform',\n    details: { linesDetected: 9, gridFit: 'poor', note: 'Significant angle detected' },\n  },\n  {\n    stage: 'CELL_EXTRACTION',\n    confidence: 0.72,\n    method: 'contour_detection',\n    details: { cellsFound: 24, uniformSize: false },\n  },\n  {\n    stage: 'PIP_RECOGNITION',\n    confidence: 0.68,\n    method: 'template_matching',\n    details: { templatesMatched: 21, avgMatchScore: 0.68 },\n  },\n]);\n\n/**\n * Failed extraction scenario - extraction did not complete successfully\n * Expected: Error state with no cell data\n */\nexport const failedExtractionResult: ExtractionResult = {\n  success: false,\n  rows: 0,\n  cols: 0,\n  cells: [],\n  stageConfidences: [\n    {\n      stage: 'BOARD_DETECTION',\n      confidence: 0.25,\n      method: 'edge_detection',\n      details: { edgeCount: 1, cornerDetection: 'failed' },\n    },\n  ],\n  hints: generateConfidenceHints([\n    {\n      stage: 'BOARD_DETECTION',\n      confidence: 0.25,\n      method: 'edge_detection',\n    },\n  ]),\n  overallConfidence: 0.25,\n  processingTimeMs: 150,\n  error: 'Failed to detect board boundaries. Ensure the board is fully visible in the frame.',\n};\n\n/**\n * All available mock scenarios for testing.\n */\nexport const mockScenarios = {\n  highConfidence: highConfidenceResult,\n  lowSingleStage: lowSingleStageResult,\n  highVariance: highVarianceResult,\n  mixedIssues: mixedIssuesResult,\n  failed: failedExtractionResult,\n} as const;\n\n/**\n * Get a random mock scenario for quick testing.\n */\nexport function getRandomMockResult(): ExtractionResult {\n  const keys = Object.keys(mockScenarios) as (keyof typeof mockScenarios)[];\n  const randomKey = keys[Math.floor(Math.random() * keys.length)];\n  return mockScenarios[randomKey];\n}\n",
        "last_modified": "2025-12-22T03:10:02.235642"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:10:00.259998",
  "last_updated": "2025-12-22T03:10:00.356544"
}