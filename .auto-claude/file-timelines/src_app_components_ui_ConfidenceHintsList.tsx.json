{
  "file_path": "src/app/components/ui/ConfidenceHintsList.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, ViewStyle } from 'react-native';\nimport Svg, { Path, Circle } from 'react-native-svg';\nimport { ConfidenceHint, HintSeverity } from '../../../extraction/types';\n\ninterface Props {\n  /** Array of confidence hints to display */\n  hints: ConfidenceHint[];\n  /** Additional container styles */\n  style?: ViewStyle;\n}\n\n/**\n * List component that displays individual confidence warning hints.\n *\n * Features:\n * - Severity-based icons (warning triangle for high/medium, info circle for low)\n * - Collapsible details showing actionable suggestions\n * - Accessible labels for screen readers\n */\nexport default function ConfidenceHintsList({ hints, style }: Props) {\n  if (hints.length === 0) {\n    return null;\n  }\n\n  return (\n    <View style={[styles.container, style]} accessibilityRole=\"list\">\n      {hints.map((hint, index) => (\n        <HintItem key={`${hint.stage}-${index}`} hint={hint} />\n      ))}\n    </View>\n  );\n}\n\ninterface HintItemProps {\n  hint: ConfidenceHint;\n}\n\nfunction HintItem({ hint }: HintItemProps) {\n  const [expanded, setExpanded] = useState(false);\n  const color = getSeverityColor(hint.severity);\n  const Icon = hint.severity === 'low' ? InfoIcon : WarningIcon;\n\n  const accessibilityLabel = `${hint.severity} severity warning: ${hint.message}. ${expanded ? hint.suggestion : 'Tap to see suggestion.'}`;\n\n  return (\n    <TouchableOpacity\n      style={styles.hintItem}\n      onPress={() => setExpanded(!expanded)}\n      accessibilityRole=\"button\"\n      accessibilityLabel={accessibilityLabel}\n      accessibilityState={{ expanded }}\n      accessibilityHint=\"Double tap to toggle suggestion details\"\n    >\n      <View style={styles.hintHeader}>\n        <View style={styles.iconContainer}>\n          <Icon color={color} size={18} />\n        </View>\n        <View style={styles.hintContent}>\n          <Text style={[styles.hintMessage, { color }]}>{hint.message}</Text>\n          <Text style={styles.hintStage}>{formatStage(hint.stage)}</Text>\n        </View>\n        <View style={styles.chevronContainer}>\n          <ChevronIcon expanded={expanded} color=\"#9aa5ce\" />\n        </View>\n      </View>\n      {expanded && (\n        <View style={styles.suggestionContainer}>\n          <Text style={styles.suggestionLabel}>Suggestion:</Text>\n          <Text style={styles.suggestionText}>{hint.suggestion}</Text>\n        </View>\n      )}\n    </TouchableOpacity>\n  );\n}\n\n/**\n * Warning triangle icon for high/medium severity hints.\n */\nfunction WarningIcon({ color, size }: { color: string; size: number }) {\n  return (\n    <Svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\n      <Path\n        d=\"M12 2L1 21h22L12 2z\"\n        fill={color}\n        fillOpacity={0.15}\n        stroke={color}\n        strokeWidth={2}\n        strokeLinejoin=\"round\"\n      />\n      <Path d=\"M12 9v4\" stroke={color} strokeWidth={2} strokeLinecap=\"round\" />\n      <Circle cx={12} cy={17} r={1} fill={color} />\n    </Svg>\n  );\n}\n\n/**\n * Info circle icon for low severity hints.\n */\nfunction InfoIcon({ color, size }: { color: string; size: number }) {\n  return (\n    <Svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\n      <Circle\n        cx={12}\n        cy={12}\n        r={10}\n        fill={color}\n        fillOpacity={0.15}\n        stroke={color}\n        strokeWidth={2}\n      />\n      <Path d=\"M12 16v-4\" stroke={color} strokeWidth={2} strokeLinecap=\"round\" />\n      <Circle cx={12} cy={8} r={1} fill={color} />\n    </Svg>\n  );\n}\n\n/**\n * Chevron icon for expand/collapse indication.\n */\nfunction ChevronIcon({ expanded, color }: { expanded: boolean; color: string }) {\n  return (\n    <Svg width={16} height={16} viewBox=\"0 0 24 24\" fill=\"none\">\n      <Path\n        d={expanded ? 'M18 15l-6-6-6 6' : 'M6 9l6 6 6-6'}\n        stroke={color}\n        strokeWidth={2}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </Svg>\n  );\n}\n\n/**\n * Get color based on hint severity level.\n */\nfunction getSeverityColor(severity: HintSeverity): string {\n  switch (severity) {\n    case 'high':\n      return '#dc2626'; // Red\n    case 'medium':\n      return '#eab308'; // Yellow\n    case 'low':\n      return '#22c55e'; // Green\n    default:\n      return '#9aa5ce'; // Default gray\n  }\n}\n\n/**\n * Format extraction stage for display.\n */\nfunction formatStage(stage: string): string {\n  return stage\n    .toLowerCase()\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, (char) => char.toUpperCase());\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    gap: 8,\n  },\n  hintItem: {\n    backgroundColor: 'rgba(255, 255, 255, 0.05)',\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  hintHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n  },\n  iconContainer: {\n    marginRight: 10,\n  },\n  hintContent: {\n    flex: 1,\n  },\n  hintMessage: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 2,\n  },\n  hintStage: {\n    fontSize: 12,\n    color: '#9aa5ce',\n  },\n  chevronContainer: {\n    marginLeft: 8,\n  },\n  suggestionContainer: {\n    paddingHorizontal: 12,\n    paddingBottom: 12,\n    paddingTop: 4,\n    backgroundColor: 'rgba(255, 255, 255, 0.02)',\n  },\n  suggestionLabel: {\n    fontSize: 11,\n    color: '#9aa5ce',\n    marginBottom: 4,\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  suggestionText: {\n    fontSize: 13,\n    color: '#e6e6e6',\n    lineHeight: 18,\n  },\n});\n",
        "last_modified": "2025-12-22T03:10:02.201518"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:09:59.410001",
  "last_updated": "2025-12-22T03:09:59.514474"
}