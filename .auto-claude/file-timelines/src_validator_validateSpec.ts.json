{
  "file_path": "src/validator/validateSpec.ts",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import { PuzzleSpec, ValidationIssue, ValidationReport } from '../model/types';\n\nexport function validateSpec(puzzle: PuzzleSpec): ValidationReport {\n  const issues: ValidationIssue[] = [];\n  if (puzzle.rows <= 0 || puzzle.cols <= 0) {\n    issues.push({ level: 'error', message: 'Rows and cols must be positive' });\n  }\n  if (puzzle.regions.length !== puzzle.rows) {\n    issues.push({ level: 'error', message: 'Regions row count mismatch' });\n  }\n  puzzle.regions.forEach((row, r) => {\n    if (row.length !== puzzle.cols) {\n      issues.push({ level: 'error', message: `Region width mismatch at row ${r}` });\n    }\n  });\n  const seen: Record<number, boolean> = {};\n  puzzle.regions.flat().forEach((id) => {\n    seen[id] = true;\n  });\n  Object.keys(puzzle.regionConstraints).forEach((id) => {\n    if (!seen[Number(id)]) {\n      issues.push({ level: 'warning', message: `Constraint for unused region ${id}` });\n    }\n  });\n  Object.entries(puzzle.regionConstraints).forEach(([id, c]) => {\n    if (c.type === 'sum' && typeof c.value !== 'number') {\n      issues.push({ level: 'error', message: `Region ${id} sum missing value` });\n    }\n  });\n  return { ok: !issues.some((i) => i.level === 'error'), issues };\n}\n",
        "last_modified": "2025-12-22T03:10:02.286994"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:10:01.827302",
  "last_updated": "2025-12-22T03:10:01.940887"
}