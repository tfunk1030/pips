{
  "file_path": "pips-solver/src/app/components/ui/Button.tsx",
  "main_branch_history": [],
  "task_views": {
    "005-add-image-stats-diagnostic-endpoint": {
      "task_id": "005-add-image-stats-diagnostic-endpoint",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:16.372053"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "005-add-image-stats-diagnostic-endpoint",
        "description": "Create a _calculate_image_stats function and expose it as a standalone API endpoint that returns brightness, contrast, dynamic range, color balance, and saturation metrics without requiring preprocessing. This helps users diagnose image quality issues before extraction.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    },
    "007-step1gridalignment-should-use-themed-ui-components": {
      "task_id": "007-step1gridalignment-should-use-themed-ui-components",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:10:00.281002"
      },
      "worktree_state": {
        "content": "/**\n * Button Component\n *\n * Themed button with press animations and multiple variants\n * Uses brass accent colors with tactile feedback\n */\n\nimport React, { useCallback } from 'react';\nimport {\n  Pressable,\n  PressableProps,\n  StyleSheet,\n  Text,\n  View,\n  ViewStyle,\n  TextStyle,\n} from 'react-native';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  withTiming,\n} from 'react-native-reanimated';\nimport { colors, radii, spacing, shadows } from '../../../theme';\nimport { fontFamilies, textStyles } from '../../../theme/fonts';\nimport { springConfigs, timingConfigs } from '../../../theme/animations';\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Types\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\ntype ButtonVariant = 'primary' | 'secondary' | 'ghost' | 'danger' | 'success';\ntype ButtonSize = 'small' | 'medium' | 'large';\n\ninterface ButtonProps extends Omit<PressableProps, 'style'> {\n  title: string;\n  variant?: ButtonVariant;\n  size?: ButtonSize;\n  fullWidth?: boolean;\n  leftIcon?: React.ReactNode;\n  rightIcon?: React.ReactNode;\n  loading?: boolean;\n  style?: ViewStyle;\n}\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Animated Pressable\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Component\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nexport function Button({\n  title,\n  variant = 'primary',\n  size = 'medium',\n  fullWidth = false,\n  leftIcon,\n  rightIcon,\n  loading = false,\n  disabled,\n  style,\n  onPressIn,\n  onPressOut,\n  ...pressableProps\n}: ButtonProps) {\n  const scale = useSharedValue(1);\n  const opacity = useSharedValue(1);\n\n  const handlePressIn = useCallback(\n    (e: any) => {\n      scale.value = withTiming(0.97, timingConfigs.fast);\n      opacity.value = withTiming(0.9, timingConfigs.fast);\n      onPressIn?.(e);\n    },\n    [scale, opacity, onPressIn]\n  );\n\n  const handlePressOut = useCallback(\n    (e: any) => {\n      scale.value = withSpring(1, springConfigs.snappy);\n      opacity.value = withTiming(1, timingConfigs.fast);\n      onPressOut?.(e);\n    },\n    [scale, opacity, onPressOut]\n  );\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n    opacity: opacity.value,\n  }));\n\n  const variantStyles = getVariantStyles(variant);\n  const sizeStyles = getSizeStyles(size);\n\n  const isDisabled = disabled || loading;\n\n  return (\n    <AnimatedPressable\n      {...pressableProps}\n      disabled={isDisabled}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n      style={[\n        styles.base,\n        variantStyles.container,\n        sizeStyles.container,\n        fullWidth && styles.fullWidth,\n        isDisabled && styles.disabled,\n        animatedStyle,\n        style,\n      ]}\n    >\n      <View style={styles.content}>\n        {leftIcon && <View style={styles.leftIcon}>{leftIcon}</View>}\n        <Text\n          style={[\n            styles.text,\n            variantStyles.text,\n            sizeStyles.text,\n            isDisabled && styles.disabledText,\n          ]}\n        >\n          {loading ? 'Loading...' : title}\n        </Text>\n        {rightIcon && <View style={styles.rightIcon}>{rightIcon}</View>}\n      </View>\n    </AnimatedPressable>\n  );\n}\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Variant Styles\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nfunction getVariantStyles(variant: ButtonVariant): {\n  container: ViewStyle;\n  text: TextStyle;\n} {\n  switch (variant) {\n    case 'primary':\n      return {\n        container: {\n          backgroundColor: colors.accent.brass,\n          ...shadows.md,\n        },\n        text: {\n          color: colors.surface.obsidian,\n        },\n      };\n    case 'secondary':\n      return {\n        container: {\n          backgroundColor: colors.surface.slate,\n          borderWidth: 1,\n          borderColor: colors.surface.ash,\n        },\n        text: {\n          color: colors.text.primary,\n        },\n      };\n    case 'ghost':\n      return {\n        container: {\n          backgroundColor: 'transparent',\n        },\n        text: {\n          color: colors.accent.brass,\n        },\n      };\n    case 'danger':\n      return {\n        container: {\n          backgroundColor: colors.semantic.coral,\n          ...shadows.md,\n        },\n        text: {\n          color: colors.text.primary,\n        },\n      };\n    case 'success':\n      return {\n        container: {\n          backgroundColor: colors.semantic.jade,\n          ...shadows.md,\n        },\n        text: {\n          color: colors.surface.obsidian,\n        },\n      };\n  }\n}\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Size Styles\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nfunction getSizeStyles(size: ButtonSize): {\n  container: ViewStyle;\n  text: TextStyle;\n} {\n  switch (size) {\n    case 'small':\n      return {\n        container: {\n          paddingVertical: spacing[2],\n          paddingHorizontal: spacing[3],\n          borderRadius: radii.md,\n        },\n        text: {\n          ...textStyles.buttonSmall,\n        },\n      };\n    case 'medium':\n      return {\n        container: {\n          paddingVertical: spacing[3],\n          paddingHorizontal: spacing[4],\n          borderRadius: radii.lg,\n        },\n        text: {\n          ...textStyles.buttonMedium,\n        },\n      };\n    case 'large':\n      return {\n        container: {\n          paddingVertical: spacing[4],\n          paddingHorizontal: spacing[6],\n          borderRadius: radii.lg,\n        },\n        text: {\n          ...textStyles.buttonLarge,\n        },\n      };\n  }\n}\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Styles\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nconst styles = StyleSheet.create({\n  base: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  content: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  text: {\n    fontFamily: fontFamilies.bodySemiBold,\n    textAlign: 'center',\n  },\n  fullWidth: {\n    width: '100%',\n  },\n  disabled: {\n    opacity: 0.5,\n  },\n  disabledText: {\n    opacity: 0.7,\n  },\n  leftIcon: {\n    marginRight: spacing[2],\n  },\n  rightIcon: {\n    marginLeft: spacing[2],\n  },\n});\n\nexport default Button;\n",
        "last_modified": "2025-12-22T03:10:03.063643"
      },
      "task_intent": {
        "title": "007-step1gridalignment-should-use-themed-ui-components",
        "description": "Refactor Step1GridAlignment screen to use the established Button, Card, and Text components from the UI library instead of raw TouchableOpacity and inline StyleSheet styles. This improves consistency, accessibility, and maintainability.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:09:28.435463",
  "last_updated": "2025-12-22T03:10:01.586208"
}