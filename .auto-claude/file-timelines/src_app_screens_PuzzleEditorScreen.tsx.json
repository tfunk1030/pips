{
  "file_path": "src/app/screens/PuzzleEditorScreen.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import React, { useState } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert, ScrollView } from 'react-native';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/RootNavigator';\nimport { parsePuzzle } from '../../model/parser';\nimport { savePuzzle } from '../../storage/puzzles';\nimport sampleText from '../../samples/sample1.yaml?raw';\n\n// @ts-ignore bundler raw import fallback\nconst sampleYaml = typeof sampleText === 'string' ? sampleText : '';\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'Editor'>;\n\nexport default function PuzzleEditorScreen({ navigation, route }: Props) {\n  const [text, setText] = useState(route.params?.initialText ?? sampleYaml);\n\n  const handleParse = async () => {\n    try {\n      const { puzzle } = parsePuzzle(text);\n      await savePuzzle({ id: `puzzle-${Date.now()}`, name: puzzle.name ?? 'Imported Puzzle', text });\n      navigation.navigate('Viewer', { puzzle, sourceText: text });\n    } catch (err: any) {\n      Alert.alert('Parse error', err.message);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.header}>Paste YAML or JSON</Text>\n      <ScrollView style={styles.editorWrapper}>\n        <TextInput\n          style={styles.editor}\n          multiline\n          value={text}\n          onChangeText={setText}\n          placeholder=\"rows: 2\\ncols: 2\\nregions: ...\"\n          placeholderTextColor=\"#6c7391\"\n        />\n      </ScrollView>\n      <View style={styles.row}>\n        <TouchableOpacity style={styles.secondary} onPress={() => setText(sampleYaml)}>\n          <Text style={styles.secondaryText}>Load Example</Text>\n        </TouchableOpacity>\n        <TouchableOpacity style={styles.primary} onPress={handleParse}>\n          <Text style={styles.primaryText}>Parse & Save</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: '#0c1021', padding: 16 },\n  header: { color: '#fff', fontSize: 18, marginBottom: 8 },\n  editorWrapper: { flex: 1, borderColor: '#1f2c4d', borderWidth: 1, borderRadius: 8, marginBottom: 12 },\n  editor: { color: '#e6e6e6', padding: 12, minHeight: 300 },\n  row: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\n  primary: { backgroundColor: '#4a60c4', padding: 12, borderRadius: 8, flex: 1, marginLeft: 8 },\n  primaryText: { color: '#fff', textAlign: 'center', fontWeight: 'bold' },\n  secondary: { borderWidth: 1, borderColor: '#4a60c4', padding: 12, borderRadius: 8, flex: 1, marginRight: 8 },\n  secondaryText: { color: '#4a60c4', textAlign: 'center', fontWeight: 'bold' },\n});\n",
        "last_modified": "2025-12-22T03:10:02.216667"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:09:59.832835",
  "last_updated": "2025-12-22T03:09:59.935395"
}