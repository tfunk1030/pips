{
  "file_path": "src/app/screens/SolveScreen.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-add-cross-stage-confidence-warnings-to-ui": {
      "task_id": "004-add-cross-stage-confidence-warnings-to-ui",
      "branch_point": {
        "commit_hash": "faf3f69f9b2794c6a85ffd2581461d3d68bdf8ef",
        "content": "",
        "timestamp": "2025-12-22T03:09:58.791154"
      },
      "worktree_state": {
        "content": "import React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, ActivityIndicator } from 'react-native';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/RootNavigator';\nimport PuzzleGrid from '../components/PuzzleGrid';\nimport { solvePuzzle } from '../../solver/solver';\nimport { validateSolution } from '../../validator/validateSolution';\nimport { SolveResult } from '../../model/types';\n\n\ntype Props = NativeStackScreenProps<RootStackParamList, 'Solve'>;\n\nexport default function SolveScreen({ route, navigation }: Props) {\n  const { puzzle, sourceText } = route.params;\n  const [result, setResult] = useState<SolveResult | null>(null);\n  const [running, setRunning] = useState(false);\n\n  useEffect(() => {\n    const run = async () => {\n      setRunning(true);\n      const res = await solvePuzzle(puzzle, { allowDuplicates: puzzle.allowDuplicates ?? false, findAll: false, maxPip: puzzle.maxPip ?? 6, progressInterval: 2500 }, (progress) => {\n        setResult((prev) => (prev ? { ...prev, stats: { ...prev.stats, nodes: progress.nodes, backtracks: progress.backtracks } } : prev));\n      });\n      const validationReport = res.solution ? validateSolution(puzzle, res.solution) : res.validationReport;\n      setResult({ ...res, validationReport });\n      setRunning(false);\n    };\n    run();\n  }, [puzzle]);\n\n  const stats = result?.stats;\n\n  return (\n    <ScrollView style={styles.container} contentContainerStyle={{ paddingBottom: 24 }}>\n      <Text style={styles.header}>Solving\u2026</Text>\n      {running && <ActivityIndicator color=\"#4a60c4\" />}\n      {result && (\n        <>\n          <Text style={styles.status}>Status: {result.status}</Text>\n          {result.solution && <PuzzleGrid puzzle={puzzle} solution={result.solution} />}\n          <Text style={styles.section}>Stats</Text>\n          {stats && (\n            <Text style={styles.text}>\n              nodes={stats.nodes} backtracks={stats.backtracks} prunes={stats.prunes} time={stats.elapsedMs.toFixed(1)}ms\n            </Text>\n          )}\n          <Text style={styles.section}>Validation</Text>\n          {result.validationReport.issues.map((issue, idx) => (\n            <Text key={idx} style={{ color: issue.level === 'error' ? '#f78c6c' : '#9aa5ce' }}>\n              \u2022 {issue.message}\n            </Text>\n          ))}\n          {result.explanation && (\n            <Text style={{ color: '#f78c6c', marginTop: 8 }}>Reason: {result.explanation}</Text>\n          )}\n          <TouchableOpacity style={styles.secondary} onPress={() => navigation.navigate('Viewer', { puzzle, sourceText })}>\n            <Text style={styles.secondaryText}>Back</Text>\n          </TouchableOpacity>\n        </>\n      )}\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: '#0c1021', padding: 16 },\n  header: { color: '#fff', fontSize: 20, marginBottom: 8 },\n  status: { color: '#e6e6e6', marginBottom: 8 },\n  section: { color: '#9aa5ce', marginTop: 16, marginBottom: 4 },\n  text: { color: '#e6e6e6' },\n  secondary: { marginTop: 16, borderWidth: 1, borderColor: '#4a60c4', padding: 12, borderRadius: 8 },\n  secondaryText: { color: '#4a60c4', textAlign: 'center', fontWeight: 'bold' },\n});\n",
        "last_modified": "2025-12-22T03:10:02.231614"
      },
      "task_intent": {
        "title": "004-add-cross-stage-confidence-warnings-to-ui",
        "description": "Display the confidence hints generated by generateConfidenceHints() in the mobile app's extraction results screen. The backend already computes these hints but the UI only shows the overall confidence percentage.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-22T03:10:00.154039",
  "last_updated": "2025-12-22T03:10:00.256999"
}